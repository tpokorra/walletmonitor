{% extends 'base.html' %}

{% block content %}
<div class="form-box">
  <h2>Monitor</h2>
  <p>Hint: these numbers are not very accurate.</p>
  
{% for c in cryptos %}
  <input type="checkbox" id="acc{{ c.crypto }}" />
  <label for="acc{{ c.crypto }}">
    {{ c.crypto }}
    {% if c.rateEUR %}{{c.rateEUR|floatformat:0}} EUR{% endif %}
    {% if c.rateUSD %}{{c.rateUSD|floatformat:0}} USD{% endif %}
  </label>

  <div class="content">
    {% if c.bought %}
    We have bought {{ c.crypto }} for {{ c.bought|floatformat:2 }} EUR<br/>
    {% endif %}
    {% if c.sold %}
    We have sold {{ c.crypto }} for {{ c.sold|floatformat:2 }} EUR<br/>
    {% endif %}
    {% if c.amount_kept %}
    Current value of our {{ c.amount_kept|floatformat:3 }} {{ c.crypto }} is {{ c.current_value|floatformat:2 }} EUR<br/>
    {% endif %}
    {% if c.bought_recently %}
    We have bought within the last 12 months:  {{ c.bought_recently|floatformat:3 }} {{ c.crypto }}<br/>
    {% endif %}
    {% if c.bought_tax_free %}
    We can sell without paying taxes: {{ c.bought_tax_free|floatformat:3 }} {{ c.crypto }} for {{ c.value_tax_free|floatformat:2 }} EUR<br/>
    {% endif %}

    {% if c.rates %}
      <table>
        {% for r in c.rates %}
        <tr>
            <td>{{ r.dateRelative }}</td>
            <td>{{ r.date|date:'Y-m-d' }}</td>
            <td>{{ r.rateEUR|floatformat:0 }} EUR/{{ c.crypto }}
              {% if r.rateUSD %}
                <br/>
                {{ r.rateUSD|floatformat:0 }} USD/{{ c.crypto }}
              {% endif %}
            </td>
            <td>{% if r.diffPercentage %}
                {{ r.diffPercentage|floatformat:1 }}%
                {% endif %}
            </td>
        </tr>
        {% endfor %}
      </table>
    {% endif %}

    <br/><a href="/transactions/show?crypto={{ c.crypto }}">My transactions</a><br/>
    <br/>
    Google: <br/>
    <a href='https://www.google.com/search?channel=crow2&client=firefox-b-d&q={{ c.crypto }}+in+eur%3D' target='_blank'>{{ c.crypto }} in EUR</a><br/>
    <a href='https://www.google.com/search?channel=crow2&client=firefox-b-d&q={{ c.crypto }}+in+usd%3D' target='_blank'>{{ c.crypto }} in USD</a><br/>
  </div>

{% endfor %}

<br/><br/><br/>

<h3>Total wallet</h3>

Total investment: {{total_investment|floatformat:2}} EUR<br/>
Virtual value of wallet: {{current_value|floatformat:2}} EUR<br/>
Total tax free: {{total_tax_free|floatformat:2}} EUR<br/>

  
</div>
{% endblock %}
